<!DOCTYPE html>
<html lang="Ko">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>해마 키우기</title>

	<!-- reset css -->
	<link rel="stylesheet" href="/common/css/common.css">

	<!-- tap 아이콘 이미지 -->
	<link rel="icon" href="/main/img/document.png" />
	<link rel="apple-touch-icon" href="/main/img/document.png" />

	<!-- css -->
	<link rel="stylesheet" href="../../index-header.css">
	<link rel="stylesheet" href="../css/bridge-index-body.css">
	<link rel="stylesheet" href="../../index-footer.css">
	<link rel="stylesheet" href="../../index-name-input/index-login.css">
	<link rel="stylesheet" href="../../index-name-input/index-body-main-game.css">
	<link rel="stylesheet" href="../../main-result-button/main-result-btn.css">

	<!-- font -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap" rel="stylesheet">

	<!-- bridge.css -->
	<link rel="stylesheet" href="/bridge/css/bridge.css">
	<!-- bridge.js -->
	<script type="javaScript" src="../js/bridge.js"></script>

	<!--js -->
	<link href="/index-banner/index-banner.js">


</head>

<body>

	<div id="wrraper">
		<header id="header">
			<div class="contains">
				<div class="title-img">
					<div class="imleft"></div>
					<div class="imright"></div>
				</div>
				<div class="title">
					<h1><em id="green">기억력</em> 게임으로<br>
						내 안의 <em>해마</em> 키우기
					</h1>
					<div id="logoImage"></div>
				</div>
				<div class="sub-img">
				</div>
			</div>

		</header>


		<!-- main body 시작-->
		<div id="main">
			<!-- banner 1 begin-->
			<div class="banner1" id="left-banner">
				<div id="slide1" class="img-box" val="1" max="3">
					<ul>
						<!-- <li><img id="imleft" src="../../index-banner/left-banner/img/left-banner-imleft.jpg" alt="">
						</li>
						<li><img id="imright" src="../../index-banner/left-banner/img/left-banner-imright.jpg" alt="">
						</li>
						<li><img id="img3" src="../../index-banner/left-banner/img/left-banner-img3.jpg" alt=""></li>
						<li><img id="img4" src="../../index-banner/left-banner/img/left-banner-img4.jpg" alt=""></li>
						<li><img id="img5" src="../../index-banner/left-banner/img/left-banner-img5.jpg" alt=""></li> -->
					</ul>
				</div>
			</div>
			<!-- banner 1 end-->
			<div class="contains">
				<div class="contents">
					<div class="main-game">
						<div class="game-nav">
							<div class="nav bridge-game">
								<!--Bridge Game begin-->

								<!--game box left-->
								<div id="bridge-left">
									<div>
										<span>온 힘을 다 해서 살아남으세요</span>
									</div>
								</div>
								<!--game box main-->
								<!-- LV 1-->
								<div id="bridge-start">
									<div class="bridge-container">
										<div class="bridge-content">
											<div class="start">
												<div class="character" id="char-start">
													<img src="../bridge-img/bridge-img-girl1.jpg">
												</div>
											</div>
											<div class="bridge-pannel">
												<div id="bridge-left-btn" class="left">
													<button id="1" class="glass left"></button>
													<button id="2" class="glass left"></button>
													<button id="3" class="glass left"></button>
													<button id="4" class="glass left"></button>
													<button id="5" class="glass left"></button>
													<button id="6" class="glass left"></button>
												</div>
												<div id="bridge-right-btn" class="right">
													<!-- <button id="1" class="glass right"></button>
													<button id="1" class="glass right"></button> -->
													<button id="1" class="glass right"></button>
													<button id="2" class="glass right"></button>
													<button id="3" class="glass right"></button>
													<button id="4" class="glass right"></button>
													<button id="5" class="glass right"></button>
													<button id="6" class="glass right"></button>
												</div>
											</div>
											<div class="finish">
												<div class="character" id="char-finish">
													<img src="../bridge-img/bridge-img-fail.png">
												</div>
											</div>
										</div>
									</div>
								</div>
								<div id="bridge-right">
									<div>
										<span>시작,다시시작,끝내기 버튼 자리</span>
									</div>
								</div>
							</div>
						</div>
						<div class="game-nav-sub">
							<ul class="nav-sub">
								<li class="btn">
									<button class="start-btn start-btn">
										<span>클릭!</span><span>결과 확인</span>
									</button>
								</li>
								<li class="btn">
									<button class="start-btn info-btn">
										<span>클릭!</span><span>게임설명</span>
									</button>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<div class="banner2">
				<div id="slide" class="img-box" val="1" max="3">
					<ul>
						<!-- <li><img id="right-imleft" src="../../index-banner/right-banner/img/right-banner-imleft.jpg"
								alt=""></li>
						<li><img id="right-imright" src="../../index-banner/right-banner/img/right-banner-imright.jpg"
								alt=""></li>
						<li><img id="right-img3" src="../../index-banner/right-banner/img/right-banner-img3.jpg" alt="">
						</li>
						<li><img id="right-img4" src="../../index-banner/right-banner/img/right-banner-img4.jpg" alt="">
						</li> -->
					</ul>
				</div>
			</div>
		</div>
	</div>



	<!-- footer 시작 -->
	<footer id="footer">
		<div class="contains">
			<div class="title">
				<ul class="nav">
					<li class="game card">
						<div class="box">
							<div class="img imleft"><a href="#" class="common"></a></div>
							<h3 class="sub-title">카드<span>총 20개의 카드를<br>기억해보자</span></h3>
							<div class="info info1">
								<div class="info-back">추가 사항 기입 예정<br>추가 사항 기입 예정<br>추가 사항 기입 예정<br>추가 사항 기입 예정
								</div>
							</div>
						</div>
					</li>
					<li class="game baseball">
						<div class="box">
							<div class="img imright"><a href="#" class="common"></a></div>
							<h3 class="sub-title">야구<span>총 7단계의<br>숫자 야구 게임!!</span></h3>
							<div class="info info2">
								<div class="info-back">추가 사항 기입 예정<br>추가 사항 기입 예정<br>추가 사항 기입 예정<br>추가 사항 기입 예정
								</div>
							</div>
						</div>
					</li>
					<li class="game bridge">
						<div class="box">
							<div class="img img3"><a href="#" class="common"></a></div>
							<h3 class="sub-title">다리<span>시간 제한없는<br>기억력 게임!</span></h3>
							<div class="info info3">
								<div class="info-back">추가 사항 기입 예정<br>추가 사항 기입 예정<br>추가 사항 기입 예정<br>추가 사항 기입 예정
								</div>
							</div>
						</div>
					</li>
				</ul>

			</div>

			<div class="gnb">
				<div class="help">
					<div class="title">
						<ul class="nav">
							<li class="info">
								<a href="#" class="menu imleft"></a>
								<div class="back-img back-imleft">010-1234-1234</div>
							</li>

							<li class="info">
								<a href="#" class="menu imright"></a>
								<div class="back-img back-imright">my@mg.com</div>
							</li>

							<li class="info">
								<a href="#" class="menu img3"></a>
								<div class="back-img back-img3">@memory-game</div>
							</li>
							<li class="info">
								<a href="#" class="menu img4"></a>
								<div class="back-img back-img4">@memory-game</div>
							</li>
							<li class="info">
								<a href="#" class="menu img5"></a>
								<div class="back-img back-img5">memory.com</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<h3 class="copy-right">© 2023. 03 Memory-Project</h3>
		</div>
	</footer>
	<!-- footer 끝 -->

	</div>

	<script>
		// 👇 ---------------------------- gameData setup ---------------------------- 👇 //

		// gameData
		const gameData = {
			result: [], // 정답을 가지고 있을 배열
			round: 1, // 현재 단계
			clearRound: 0, // 최종 클리어한 단계
		}

		// 난수 생성 함수 (return 0 or 1)
		function getRandomNumber() {
			return Math.floor(Math.random() * 10) % 2;
		}

		// result setup [ ex) console.log(gameData.result) 👉 [0, 1, 1, 0, 1, 1] ]
		function setResult() {
			gameData.result.push(getRandomNumber());
		}

		// 6단계까지 답 생성하기 (위의 함수 6번 호출(번호 6개 추가))
		for (let i = 0; i < 6; i++) {
			setResult();

		}
		// 👆 ---------------------------- gameData setup ---------------------------- 👆 //


		// 👇 ---------------------------- bridge setup ---------------------------- 👇 //
		// 부모를 호출해서 자식태그들을 배열로 선언
		const $leftBtn = [...document.getElementById('bridge-left-btn').children];
		const $rightBtn = [...document.getElementById('bridge-right-btn').children];

		// 클릭했을 때 알람을 띄우는 함수 (왼쪽 다리, 테스트용)
		function clickLeftAlert() {
			alert("왼쪽 다리 클릭됨!");

        }
		// 클릭했을 때 알람을 띄우는 함수 (오른쪽 다리, 테스트용)
		function clickRightAlert() {
			alert("오른쪽 다리 클릭됨!");
		}

		// 왼쪽 다리 버튼 onclick 이벤트에 alert 띄우는 함수 추가하기
		$leftBtn.forEach($li => {
			$li.addEventListener('click', clickLeftAlert);
		});

		// 오른쪽 다리 버튼 onclick 이벤트에 alert 띄우는 함수 추가하기
		$rightBtn.forEach($li => {
			$li.addEventListener('click', clickRightAlert);
		})

		// $btn 태그에게 disabled=true 를 추가하는 함수 (true는 클릭이 안 됨)
		function setDisabled($btn) {
			$btn.setAttribute('disabled', true);
		}

		// $btn 태그에게 disabled를 삭제함 (클릭이 됨)
		function removeDisabled($btn) {
			$btn.removeAttribute('disabled');
		}

		// 왼쪽 다리와 오른쪽 다리 전부를 클릭 불가하게 만듬
		$leftBtn.forEach($li => setDisabled($li));
		$rightBtn.forEach($li => setDisabled($li));

		// 왼쪽, 오른쪽 다리의 첫번째 자식은 클릭이 되게끔 disabled 해제
		removeDisabled($leftBtn[0]);
		removeDisabled($rightBtn[0]);

		// gameData.result 가 가지고 있는 정답 배열을 기준으로
		// 다리들에게 정답을 부여하기
		// key 값은 'result' 이며 밸류는 0과 1 두 개만 존재
		for (let i = 0; i < 6; i++) {
			if (gameData.result[i] === 1) {
				$leftBtn[i].setAttribute('result', 1);
				$rightBtn[i].setAttribute('result', 0);
			} else {
				$leftBtn[i].setAttribute('result', 0);
				$rightBtn[i].setAttribute('result', 1);
			}
		}

		// 👆 현재 상태는 1번째 다리만 클릭이되고 나머지 다리는 클릭이 불가함

		// --- 아래의 코드부터는 클릭 했을 때 정답(1)일 경우와, 오답(0)일 경우로 나누어 로직을 구현 --- //

		// ✅ 정답(1)일 경우 ✅
		// ->> 클릭된 버튼에게 disabled=true를 부여해 클릭이 안 되게 만듬
		// ->> left, right 버튼 둘 다 클릭이 안 되게 만들어야함
		// ❌ 오답(1)일 경우 ❌
		// ->> round를 1단계로 초기화하고 맨 처음 셋업(1번 다리만 클릭이 가능하게)으로 돌려놔야 함


		// ❌ 오답(1)일 경우 ❌ 초기화하는 함수
		function resetBridge() {

			// 왼쪽 다리와 오른쪽 다리 전부를 클릭 불가하게 만듬
			$leftBtn.forEach($li => setDisabled($li));
			$rightBtn.forEach($li => setDisabled($li));

			// 왼쪽, 오른쪽 다리의 첫번째 자식은 클릭이 되게끔 disabled 해제
			removeDisabled($leftBtn[0]);
			removeDisabled($rightBtn[0]);

			// round 1단계로 초기화
			gameData.round = 1;
		}


		// 왼쪽 다리 정답을 확인하는 함수
		function leftCheckResult() {
			const $leftBridge = $leftBtn[gameData.clearRound];
			const bridgeResult = +$leftBridge.getAttribute('result');

			const $rightBridge = $rightBtn[gameData.clearRound];

			if (bridgeResult === 1) {
				// ✅ 정답(1)일 경우 ✅
              alert("정답입니다! 한 칸 앞으로 이동했습니다!");
              alert("다음 옵션을 선택하세요");
				// 현재 버튼 클릭 불가로 설정 (left right 둘 다)
				setDisabled($leftBridge);
				setDisabled($rightBridge);

				// 현재 클리어한 라운드를 최종 라운드로 갱신
				// 비교해서 큰 값 추가
				// gameData 시도 횟수를 키로 추가해서
				gameData.clearRound = gameData.round;

				// round 1 상승
				gameData.round++;

				// 다음 버튼 클릭 허용 (왼쪽, 오른쪽 모두 허용해야함)
				// 부모 호출 후 해당 id 값이 라운드와 같다면 disabled 해제시키기
				$leftBtn.forEach($btn => {
					if (+$btn.getAttribute('id') === gameData.round) {
						removeDisabled($btn);
					}
				});

				$rightBtn.forEach($btn => {
					if (+$btn.getAttribute('id') === gameData.round) {
						removeDisabled($btn);
					}
				});

			} else {
				// ❌ 오답(1)일 경우 ❌
                alert("왼쪽다리는 정답이 아닙니다 \n 처음부터 다시 시작하세요!");
				// reset
				resetBridge();
			}
		}

		function rightCheckResult() {
			const $rightBridge = $rightBtn[gameData.clearRound];
			const bridgeResult = +$rightBridge.getAttribute('result');

			const $leftBridge = $leftBtn[gameData.clearRound];

			if (bridgeResult === 1) {
				// ✅ 정답(1)일 경우 ✅
					alert("정답입니다! 한 칸 앞으로 이동했습니다!");
                    alert("다음 옵션을 선택하세요");
				// 현재 버튼 클릭 불가로 설정 (left right 둘 다)
				setDisabled($rightBridge);
				setDisabled($leftBridge);

				// 현재 클리어한 라운드를 최종 라운드로 갱신
				gameData.clearRound = gameData.round;

				// round 1 상승
				gameData.round++;

				// 다음 버튼 클릭 허용 (왼쪽, 오른쪽 모두 허용해야함)
				// 부모 호출 후 해당 id 값의 
				$leftBtn.forEach($btn => {
					if (+$btn.getAttribute('id') === gameData.round) {
						removeDisabled($btn);
					}
				});

				$rightBtn.forEach($btn => {
					if (+$btn.getAttribute('id') === gameData.round) {
						removeDisabled($btn);
					}
				});

			} else {
				// ❌ 오답(1)일 경우 ❌
              alert("오른쪽 다리는 정답이 아닙니다 \n 처음부터 다시 시작하세요!");
				// reset
				resetBridge();
			}
		}

		// 왼쪽 다리 버튼 onclick 이벤트에 정답을 확인하는 함수 추가하기
		$leftBtn.forEach($li => {
			$li.addEventListener('click', leftCheckResult);
		});

		// 오른쪽 다리 버튼 onclick 이벤트에 정답을 확인하는 함수 추가하기
		$rightBtn.forEach($li => {
			$li.addEventListener('click', rightCheckResult);
		})

		console.log(gameData.result);

		
		// 클릭했을 때 이미지를 업데이트 시키는 함수
		
		// 👆 ---------------------------- bridge setup ---------------------------- 👆 //





		//👇 ---------------------------- bridge img ---------------------------- 👇 //

		// endGame 함수 (clearRound가 6이 될 때가 게임을 다 깼을 때)
        function endGame(clearRound){
          if(clearRound <= 6);{
            alert(`승리하셨습니다. \n 해마 포인트를 획득하셨습니다!`);

          }
        }
		//👆 ---------------------------- bridge img ---------------------------- 👆 //














		// // --------------------------- gameData setup ---------------------------

		// const gameData = {
		// 	round: 0,
		// 	result: [],
		// 	clearRound: 0,
		// }

		// function getRandom() {
		// 	return (Math.floor(Math.random() * 10)) % 2;
		// }

		// function resultSetup() {
		// 	for (let i = 0; i < 20; i++) {
		// 		gameData.result.push(getRandom());
		// 	}
		// }

		// // gameData 정답 생성
		// resultSetup();

		// function reset() {
		// 	const $bridgeLeftBtn = document.getElementById('bridge-left-btn');
		// 	const $bridgeRightBtn = document.getElementById('bridge-right-btn');
		// }

		// // --------------------------- gameData setup ---------------------------

		// // 	<button id="0" class="glass left"></button>
		// // <button id="0" class="glass left"></button>
		// // 	<div id="bridge-right-btn" class="right">
		// // <button id="1" class="glass right"></bu

		// // --------------------------- btn setup ---------------------------

		// function btnSetup() {
		// 	const startRound = 6;

		// 	const $bridgeLeftBtn = document.getElementById('bridge-left-btn');
		// 	const $bridgeRightBtn = document.getElementById('bridge-right-btn');

		// 	for (let i = 1; i <= startRound; i++) {
		// 		const $leftTag = document.createElement('button');
		// 		const $rightTag = document.createElement('button');

		// 		$leftTag.setAttribute('id', '0');
		// 		$leftTag.setAttribute('key', i);
		// 		$leftTag.setAttribute('class', 'glass left');

		// 		$rightTag.setAttribute('id', '1');
		// 		$rightTag.setAttribute('key', i);
		// 		$rightTag.setAttribute('class', 'glass right');

		// 		$bridgeLeftBtn.appendChild($leftTag);
		// 		$bridgeRightBtn.appendChild($rightTag);
		// 	}
		// }

		// btnSetup();
		// function btnReset() {
		// 	const $leftBtn = document.getElementById('bridge-left-btn');
		// 	[...$leftBtn.children].forEach($li => {
		// 		$leftBtn.removeChild($li);
		// 	});
		// 	const $rightBtn = document.getElementById('bridge-right-btn');
		// 	[...$rightBtn.children].forEach($li => {
		// 		$rightBtn.removeChild($li);
		// 	});
		// }

		// btnSetup();
		// // --------------------------- btn setup ---------------------------

		// console.log(gameData.result);

		// // --------------------------- btn setup ---------------------------

		// // 	const gameData = {
		// // round: 1,
		// // result: [],
		// // }

		// // 클릭 이벤트 추가하기.
		// // 해당 라운드에 해당하는 버튼만 활성화 시켜준다.
		// // 초기 셋업 : round :0 부터이니 0번째 배열값에 추가한다.

		// function makeBridgeBtn() {
		// 	gameData.clearRound = gameData.clearRound < gameData.round ? gameData.round : gameData.clearRound;

		// 	if (gameData.round === 6) {
		// 		alert(`게임 클리어!!!\n내 최고 라운드 : ${gameData.clearRound}`);
		// 		return;
		// 	}

		// 	alert(`다리를 선택하세요 ${gameData.round} 라운드! \n 최고 라운드 : ${gameData.clearRound}`);
		// 	const round = gameData.round;

		// 	const leftNumber = document.getElementById('bridge-left-btn').children[round];
		// 	const rightNumber = document.getElementById('bridge-right-btn').children[round];

		// 	leftNumber.onclick = () => {
		// 		const $number = +leftNumber.getAttribute('id');

		// 		if ($number === gameData.result[round]) {
		// 			alert("left 정답!!!");
		// 			gameData.round++;
		// 			leftNumber.onclick = null;
		// 			rightNumber.onclick = null;

		// 			// 
		// 			makeBridgeBtn();
		// 		} else {
		// 			alert("left 오답!!!");
		// 			gameData.round = 0;
		// 			btnReset();
		// 			btnSetup();
		// 			// 
		// 			//

		// 			makeBridgeBtn();

		// 		}
		// 	};

		// 	rightNumber.onclick = () => {
		// 		const $number = +rightNumber.getAttribute('id');

		// 		if ($number === gameData.result[round]) {
		// 			alert("right 정답!!!");
		// 			gameData.round++;
		// 			leftNumber.onclick = null;
		// 			rightNumber.onclick = null;
		// 			makeBridgeBtn();

		// 		} else {
		// 			alert("right 오답!!!");
		// 			gameData.round = 0;
		// 			btnReset();
		// 			btnSetup();
		// 			makeBridgeBtn();
		// 		}
		// 	};
		// }

		// makeBridgeBtn();

		// --------------------------- btn setup ---------------------------
	</script>
</body>

</html>